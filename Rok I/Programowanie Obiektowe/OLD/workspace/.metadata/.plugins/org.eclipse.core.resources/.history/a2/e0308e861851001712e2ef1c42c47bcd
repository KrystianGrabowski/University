
import java.awt.Font;
import java.awt.event.ActionEvent;
import java.io.FileNotFoundException;
import java.util.Objects;

import javax.swing.JButton;
import javax.swing.JFrame;
import javax.swing.JLabel;
import javax.swing.JPanel;
import javax.swing.JTextField;


public class Silownia extends Obiekt_Sportowy implements OpisOb {
	public Pracownicy P;
	public Klienci K;
	public int nr_lokalu;
	public String zapisP = "pracownicyS.txt", zapisK = "klienciS.txt";
	public Silownia(String n, String u, int nr, Integer t)
	{
		K = new Klienci();
		P = new Pracownicy();
		nazwa = n;
		ulica = u;
		nr_lokalu = nr;
		telefon = t;
		wczytaj("Pracownicy");
		wczytaj("Klienci");

	}
	public Silownia()
	{
		K = new Klienci();
		P = new Pracownicy();

	}
	public String nazwa()
	{
		return "Witamy w silowni " + nazwa;
	}
	public String kontakt()
	{
		return "Kontakt do silowni " + nazwa + " -> " + telefon;
	}
	
	
	
	
	public void dodaj_k(String imie, String nazwisko, String datax, String datay, int wiek , String pesel)
	{
		K.dodaj(imie, nazwisko, datax, datay, wiek, pesel);
		zapisz("Klienci");
	}
	
	public void usun_k(String imie, String nazwisko)
	{
		K.usun(imie, nazwisko);
		zapisz("Klienci");
	}
	public boolean klient_k(String imie, String nazwisko)
	{
		return K.klient(imie, nazwisko);
	}

	public void wypisz_klientow(){
		System.out.print(K.ToStringK()) ;
	}
	
	public void waznosc_karnetu(String imie, String nazwisko){
		System.out.print("Karnet wazny : " + K.ile_dni_wazny(imie, nazwisko) + " dni\n");
	}
	
	public void przedluz_karnet(String imie, String nazwisko, Integer dni){
		K.przedluz(imie, nazwisko, dni);
		zapisz("Klienci");
	}
	
	
	
	
	
	
	
	
	public void dodaj_p(String imie, String nazwisko, String stanowisko, int wiek , String pesel)
	{
		P.dodaj(imie, nazwisko, stanowisko, wiek, pesel);
		zapisz("Pracownicy");
	}
	
	public void usun_p(String imie, String nazwisko)
	{
		P.usun(imie, nazwisko);
		zapisz("Pracownicy");
	}
	public boolean pracuje_p(String imie, String nazwisko)
	{
		return P.zatrudniony(imie, nazwisko);
	}

	public void wypisz_pracownikow(){
		System.out.print(P.ToStringP()) ;
	}
	
	
	
	
	
	public void zapisz(String T){
		try {
			if (Objects.equals(T, "Pracownicy" )){
				P.WriteToFile(zapisP);				
			}
			else{
				K.WriteToFile(zapisK);
			}

		} catch (FileNotFoundException e) {
			System.out.println("NIE ZNAEZIONO PLIKU");
		}
	}
	public void wczytaj(String T){
		try {
			if (Objects.equals(T, "Pracownicy" )){
				P.ReadFromFile(zapisP);				
			}
			else{
				K.ReadFromFile(zapisK);
			}

		} 
		catch (FileNotFoundException e) {
			System.out.println("NIE ZNAEZIONO PLIKU");
		}

	}
	public void edycja(){
		K.Edycja();
	}
	public void zarzadzanie(){
		
		JFrame frame = new JFrame();

	    setTitle("Zarzadzanie");
	    JPanel panel = new JPanel();
	    panel.setLayout(null);
	    frame.add(panel);
	        
		JLabel imie_etykieta = new JLabel("Wybierz akcje");
		imie_etykieta.setFont(new Font("Serif", Font.PLAIN, 30));
		imie_etykieta.setBounds(200,30,300,70);
		panel.add(imie_etykieta);
		
		klk = new JButton("Dodaj Klienta");
		klk.setBounds(30,150,140,70);
		klk.addActionListener(this);
		panel.add(klk);
		
		klka = new JButton("Usun Klienta");
		klka.setBounds(160,150,140,70);
		klka.addActionListener(this);
		panel.add(klka);
		
		klkb = new JButton("Dodaj pracwonika");
		klkb.setBounds(290,150,140,70);
		klkb.addActionListener(this);
		panel.add(klkb);
		
		klkc = new JButton("Usun pracownika");
		klkc.setBounds(420,150,140,70);
		klkc.addActionListener(this);
		panel.add(klkc);
		
		


	    setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);
	    frame.setSize(600, 400);
	    frame.setVisible(true);


	}
		
	public void DK(){
		
		JFrame frame = new JFrame();

	    setTitle("Dodawanie klienta");
	    JPanel panel = new JPanel();
	    panel.setLayout(null);
	    frame.add(panel);
	       
		JLabel imie_etykieta = new JLabel("Imie");
		imie_etykieta.setFont(new Font("Serif", Font.PLAIN, 16));
		imie_etykieta.setBounds(30,30,100,20);
		panel.add(imie_etykieta);
		PImie = new JTextField(0);
		PImie.setBounds(120, 30, 150, 30);
		panel.add(PImie);
		
		JLabel nazwisko_etykieta = new JLabel("Nazwisko");
		nazwisko_etykieta.setFont(new Font("Serif", Font.PLAIN, 16));
		panel.add(nazwisko_etykieta);
		nazwisko_etykieta.setBounds(30,70,100,30);
		PNazwisko = new JTextField(40);
		PNazwisko.setBounds(120,70,150,30);
		panel.add(PNazwisko);
		
		JLabel datax_etykieta = new JLabel("Data zakupu");
		datax_etykieta.setFont(new Font("Serif", Font.PLAIN, 16));
		datax_etykieta.setBounds(30,110,100,20);
		panel.add(datax_etykieta);
		Dx = new JTextField(40);
		Dx.setBounds(120,110,150,30);
		panel.add(Dx);
		
		JLabel datay_etykieta = new JLabel("Data konca");
		datay_etykieta.setFont(new Font("Serif", Font.PLAIN, 16));
		datay_etykieta.setBounds(30,150,100,20);
		panel.add(datay_etykieta);
		Dy = new JTextField(40);
		Dy.setBounds(120,150,150,30);
		panel.add(Dy);
		
		JLabel wiek_etykieta = new JLabel("Wiek");
		wiek_etykieta.setFont(new Font("Serif", Font.PLAIN, 16));
		wiek_etykieta.setBounds(30,190,100,20);
		panel.add(wiek_etykieta);
		PWiek = new JTextField(40);
		PWiek.setBounds(120,190,150,30);
		panel.add(PWiek);
		
		JLabel pesel_etykieta = new JLabel("Pesel");
		pesel_etykieta.setFont(new Font("Serif", Font.PLAIN, 16));
		pesel_etykieta.setBounds(30,230,100,20);
		panel.add(pesel_etykieta);
		PPesel = new JTextField(40);
		PPesel.setBounds(120,230,150,30);
		panel.add(PPesel);
		
		addk = new JButton("Dodaj");
		addk.setBounds(350,150,140,70);
		addk.addActionListener(this);
		panel.add(addk);
		
		W = new JLabel();
		W.setFont(new Font("Serif", Font.PLAIN, 25));
		W.setLocation(400, 240);
		W.setSize(500, 50);
		panel.add(W);

	    setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);
	    frame.setSize(600, 400);
	    frame.setVisible(true);


	}

		public void actionPerformed(ActionEvent e) {
			if (e.getSource() == klk){
				DK();
			}
			else if (e.getSource() == addk){
			DK();
			}
			
	}

}
